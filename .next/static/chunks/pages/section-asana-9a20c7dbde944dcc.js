(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{14451:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var l=a(37876);a(14232);var t=a(75656),n=a(10553),r=a(48230),c=a.n(r);let d=e=>fetch(e).then(e=>e.json());function i(){let{data:e,status:s}=(0,n.useSession)(),a="authenticated"===s,r="1209946817478639",i=a?"/api/asana/tasks?projectId=".concat("1209946324492253","&sectionId=").concat(r):null,{data:o,error:x}=(0,t.Ay)(i,d),h=Array.isArray(o)?o:[];return a?x?(0,l.jsxs)("p",{className:"p-6 text-red-600",children:["Erreur Asana : ",x.error||x.message]}):o?(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["Section “P\xf4le Autom’/Elec” (ID ",r,")"]}),0===h.length?(0,l.jsx)("p",{children:"Aucune t\xe2che trouv\xe9e dans cette section."}):(0,l.jsx)("div",{className:"overflow-auto border rounded shadow",children:(0,l.jsxs)("table",{className:"min-w-full table-auto",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Nom de la t\xe2che"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Assign\xe9\xb7e"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"\xc9ch\xe9ance"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Priorit\xe9"})," ",(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Statut"})]})}),(0,l.jsx)("tbody",{children:h.map(e=>{var s,a;console.log("TASK",e.name,e.custom_fields);let t=(e.custom_fields||[]).find(e=>e.name&&"priorite"===e.name.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")),n=(null==t?void 0:t.display_value)||(null==t||null==(s=t.enum_value)?void 0:s.name)||(null==t?void 0:t.text_value)||(null==t?void 0:t.number_value)||(null==t?void 0:t.name)||"–";return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,l.jsx)("td",{className:"border px-4 py-2",children:(null==(a=e.assignee)?void 0:a.name)||"–"}),(0,l.jsx)("td",{className:"border px-4 py-2",children:e.due_on||"–"}),(0,l.jsx)("td",{className:"border px-4 py-2",children:n})," ",(0,l.jsx)("td",{className:"border px-4 py-2",children:e.completed?(0,l.jsx)("span",{className:"inline-block px-2 py-1 bg-green-200 text-green-800 rounded text-xs",children:"Termin\xe9e"}):(0,l.jsx)("span",{className:"inline-block px-2 py-1 bg-yellow-200 text-yellow-800 rounded text-xs",children:"En cours"})})]},e.gid)})})]})}),(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(c(),{href:"/projects-asana",children:"← Retour aux onglets Asana"})})]}):(0,l.jsx)("p",{className:"p-6",children:"Chargement des t\xe2ches de la section…"}):(0,l.jsx)("p",{className:"p-6 text-red-600",children:"Vous devez vous connecter pour voir les t\xe2ches de cette section."})}},90898:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/section-asana",function(){return a(14451)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(90898)),_N_E=e.O()}]);