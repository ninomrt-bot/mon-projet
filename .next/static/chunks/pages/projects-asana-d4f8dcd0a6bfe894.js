(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{13155:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(37876),a=s(14232),n=s(75656),l=s(48230),i=s.n(l);let d=e=>fetch(e).then(e=>e.json());function c(){let{data:e,error:r}=(0,n.Ay)("/api/asana/tasks?projectId=".concat("1209946324492253"),d),s=(0,a.useMemo)(()=>Array.isArray(e)?e.map(e=>{var r;let s=e.memberships&&e.memberships.length>0?e.memberships[0].section.name:"Sans section",t={};return Array.isArray(e.custom_fields)&&e.custom_fields.forEach(e=>{t[e.name]=e.display_value}),{gid:e.gid,name:e.name,assignee:(null==(r=e.assignee)?void 0:r.name)||"–",dueDate:e.due_on||"–",completed:e.completed,section:s,statut:t.Statut||"–",relecteur:t.Relecteur||"–",barreur:t.Barreur||"–",complexite:t["Complexit\xe9"]||"–",demarrage:t["D\xe9marrage"]||"–",cableurMonteur:t["C\xe2bleur/Monteur"]||"–",priorite:t["Priorit\xe9"]||"–"}}):[],[e]),l=(0,a.useMemo)(()=>{let e={};return s.forEach(r=>{e[r.section]||(e[r.section]=[]),e[r.section].push(r)}),e},[s]),[c,o]=(0,a.useState)({}),h=e=>{o(r=>({...r,[e]:!r[e]}))};return r?(0,t.jsxs)("p",{className:"p-6 text-red-600",children:["Erreur Asana : ",r.error||r.message]}):e?0===s.length?(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"P\xf4le Autom’/Elec (Asana)"}),(0,t.jsx)("p",{children:"Aucune t\xe2che trouv\xe9e dans ce projet."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(i(),{href:"/",children:"← Retour au Dashboard"})})]}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"P\xf4le Autom’/Elec (Asana)"}),Object.entries(l).map(e=>{let[r,s]=e;return(0,t.jsxs)("div",{className:"mb-4 border rounded overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>h(r),className:"w-full flex justify-between items-center bg-gray-100 px-4 py-2 hover:bg-gray-200",children:[(0,t.jsx)("span",{className:"text-lg font-medium text-gray-800",children:r}),(0,t.jsx)("span",{className:"text-gray-600",children:c[r]?"–":"+"})]}),c[r]&&(0,t.jsx)("ul",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(e=>(0,t.jsxs)("li",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-md font-semibold text-gray-900 dark:text-gray-100",children:e.name}),(0,t.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-semibold ".concat(e.completed?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"),children:e.completed?"Termin\xe9e":"En cours"})]}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Responsable :"})," ",e.assignee]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"\xc9ch\xe9ance :"})," ",e.dueDate]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Statut :"})," ",e.statut]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Relecteur :"})," ",e.relecteur]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Barreur :"})," ",e.barreur]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Complexit\xe9 :"})," ",e.complexite]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Priorit\xe9 :"})," ",e.priorite]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"D\xe9marrage :"})," ",e.demarrage]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("strong",{children:"C\xe2bleur/Monteur :"})," ",e.cableurMonteur]})]})]},e.gid))})]},r)}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(i(),{href:"/",children:"← Retour au Dashboard"})})]}):(0,t.jsx)("p",{className:"p-6",children:"Chargement des t\xe2ches du projet…"})}},29087:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects-asana",function(){return s(13155)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(29087)),_N_E=e.O()}]);