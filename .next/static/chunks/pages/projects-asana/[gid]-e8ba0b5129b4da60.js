(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{22058:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects-asana/[gid]",function(){return a(33381)}])},33381:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var l=a(37876),t=a(89099),n=a(75656),r=a(48230),c=a.n(r);let d=e=>fetch(e).then(e=>e.json());function i(){let{query:e}=(0,t.useRouter)(),s=e.gid,{data:a,error:r}=(0,n.Ay)(s?"/api/asana/project/".concat(s):null,d);return s?r?(0,l.jsxs)("p",{className:"text-red-600",children:["Erreur Asana : ",r.error||r]}):a?(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsx)(c(),{href:"/projects-asana",children:(0,l.jsx)("button",{className:"text-sm text-blue-600 hover:underline",children:"← Retour aux projets"})}),a.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:e.name}),e.error&&(0,l.jsxs)("p",{className:"text-red-500",children:["Erreur section : ",e.error]}),0===e.tasks.length?(0,l.jsx)("p",{className:"text-gray-500",children:"Aucune t\xe2che dans cette section."}):(0,l.jsxs)("table",{className:"w-full table-auto",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsx)("tr",{children:["Nom","Assign\xe9 \xe0","Statut","\xc9ch\xe9ance","Priorit\xe9"].map(e=>(0,l.jsx)("th",{className:"px-2 py-1 text-left text-sm",children:e},e))})}),(0,l.jsx)("tbody",{children:e.tasks.map(e=>{var s,a;let t=(e.custom_fields||[]).find(e=>e.name&&"priorite"===e.name.trim().toLowerCase().replace(/é/g,"e")),n=(null==t?void 0:t.display_value)||(null==t||null==(s=t.enum_value)?void 0:s.name)||(null==t?void 0:t.text_value)||(null==t?void 0:t.number_value)||(null==t?void 0:t.name)||"–";return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-2 py-1",children:e.name}),(0,l.jsx)("td",{className:"px-2 py-1",children:(null==(a=e.assignee)?void 0:a.name)||"—"}),(0,l.jsx)("td",{className:"px-2 py-1",children:e.completed?"Termin\xe9":e.assignee_status}),(0,l.jsx)("td",{className:"px-2 py-1",children:e.due_on||"—"}),(0,l.jsx)("td",{className:"px-2 py-1",children:n})]},e.gid)})})]})]},e.gid))]}):(0,l.jsx)("p",{children:"Chargement des sections…"}):(0,l.jsx)("p",{children:"Chargement du GID…"})}}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(22058)),_N_E=e.O()}]);